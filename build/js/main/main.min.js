"use strict";svg4everybody();var xhr=new XMLHttpRequest,containerCards=document.querySelector(".products-block__tabs-content");function insertCardsProduct(e){var r=document.querySelector("#template-card").content.querySelector(".product-card"),o=document.querySelector(".products-block__tabs-content");e.forEach(function(e){var t=createCardProduct(r,e);o.appendChild(t)})}function createCardProduct(e,d){var t,r,a,o,c,n,u=e.cloneNode(!0),i=u.querySelector(".product-card__form"),l=u.querySelector(".product-card__add-to-basket"),s=u.querySelector(".product-card__quantity-icon-in-stock"),p=u.querySelector(".product-card__quantity-icon-none"),_=u.querySelector(".product-card__quantity-count"),f=u.querySelector(".product-card__rating-star"),m=Array.prototype.slice.call(f.querySelectorAll(".rating-star-input")),y=f.querySelectorAll(".rating-star-label"),h=u.querySelector(".product-card__img"),q=u.querySelector(".product-card__title"),C=u.querySelector(".product-card__articul-text"),S=u.querySelector(".product-card__price"),x=document.createElement("div"),b=document.createElement("span"),v=document.createElement("div"),g=document.createElement("input"),E=document.createElement("label"),k=document.createElement("img"),N=document.createElement("span");return x.classList.add("product-card__offers-block"),b.classList.add("product-card__offers-title"),v.classList.add("product-card__offers-wrap"),x.append(b),x.append(v),g.classList.add("product-card__offers-item-input"),g.type="radio",E.classList.add("product-card__offers-item-label"),k.classList.add("product-card__offers-item-img"),N.classList.add("product-card__offers-item-label-text"),h.setAttribute("src",d.imgSrc),q.textContent=d.title,C.textContent=d.productCode,S.textContent=d.price,m.forEach(function(e,t){e.id="star-rating_ID"+t+d.id,e.name="star-rating_ID"+d.id,y[t].setAttribute("for","star-rating_ID"+t+d.id),d.rating==e.value&&(e.checked=!0)}),d.quantity<=0?(_.textContent=0,s.style.display="none"):(_.textContent=d.quantity,p.style.display="none"),d.colors&&(r=(t=i.insertBefore(x.cloneNode(!0),l)).querySelector(".product-card__offers-title"),a=t.querySelector(".product-card__offers-wrap"),r.textContent="Цвет",d.colors.forEach(function(e,t){var r=a.appendChild(g.cloneNode()),o=a.appendChild(E.cloneNode()),c=o.appendChild(k.cloneNode());r.id="color_offer_"+d.id+t,r.name="product-card__offers-color",r.value=e.nameColor,o.setAttribute("for",r.id),c.setAttribute("src",e.imgColor),0==t&&(r.checked=!0)})),d.size&&(c=(o=i.insertBefore(x.cloneNode(!0),l)).querySelector(".product-card__offers-title"),n=o.querySelector(".product-card__offers-wrap"),c.textContent="Размер",d.size.forEach(function(e,t){var r=n.appendChild(g.cloneNode()),o=n.appendChild(E.cloneNode()),c=o.appendChild(N.cloneNode());r.id="size_offer_"+d.id+t,r.name="product-card__offers-size",r.value=e,o.setAttribute("for",r.id),c.textContent=e,0==t&&(r.checked=!0)})),u}xhr.open("POST","http://alex-checktask.devsotbit.ru/teaching/products.php"),xhr.timeout=2e3,xhr.onload=function(){200!=xhr.status?addErrorText(containerCards,"error"):(insertCardsProduct(JSON.parse(xhr.response)),removePreloader())},xhr.ontimeout=function(){addErrorText(containerCards,"timeout"),removePreloader()},xhr.send(),showPreloader();